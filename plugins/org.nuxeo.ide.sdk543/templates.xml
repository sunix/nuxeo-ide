<templates version="0.0.0">

  <project id="default" src="projects/default">
    <name>Empty Project</name>
    <description>An empty Nuxeo project</description>
    <!--
    <preInstall>
    </preInstall>

    <postInstall>
    </postInstall>
    -->

    <mkdir path="src/main/java/${packagePath}" />
    <mkdir path="src/test/java/${packagePath}/test" />
    <mkdir path="src/test/resources" />

    <!--  process templates -->
    <transform path="pom.xml" />
    <transform path=".classpath" />
    <transform path=".project" />
    <transform path="src/main/resources/META-INF/MANIFEST.MF" />
  </project>


  <project id="webengine" src="projects/webengine">
    <name>WebEngine Project</name>
    <description>A project defining a WebEngine application</description>

    <mkdir path="src/main/java/${packagePath}" />
    <mkdir path="src/test/java/${packagePath}/test" />
    <mkdir path="src/test/resources" />

    <transform path="pom.xml" />
    <transform path=".classpath" />
    <transform path=".project" />
    <transform path="src/main/resources/META-INF/MANIFEST.MF" />
    <transform path="src/main/java/packagePath/MyRoot.java" to="src/main/java/${packagePath}/${className}.java"/>

    <rename path="src/main/resources/skin/views/MyRoot" to="src/main/resources/skin/views/${className}" />

    <select path = "src/main/java/${packagePath}/${className}.java" />
  </project>

  <feature id ="operation" src="features/automation/project">
    <name>Operation</name>
    <description>An operation object</description>

    <extension src="features/automation/extensions.xml"/>

    <dependencies>
        <dependency groupId="org.nuxeo.ecm.automation" artifactId="nuxeo-automation-core"/>
    </dependencies>

    <transform path="src/main/java/packagePath/MyOperation.java" to="src/main/java/${packagePath}/${className}.java" />
    
    <select path = "src/main/java/${packagePath}/${className}.java" />
  </feature>

  <feature id ="docadapter" src="features/docadapter/project">
    <name>Document Adapter</name>
    <description>A document adapter over a set of document schemas</description>

    <extension src="features/docadapter/extensions.xml"/>

    <dependencies>
        <dependency groupId="org.nuxeo.ecm.core" artifactId="nuxeo-core-api"/>
    </dependencies>

    <transform path="src/main/java/packagePath/MyDocumentAdapterFactory.java" to="src/main/java/${packagePath}/${className}Factory.java" />
    <transform path="src/main/java/packagePath/MyDocumentAdapter.java" to="src/main/java/${packagePath}/${className}.java" />
    
    <select path = "src/main/java/${packagePath}/${className}.java" />
  </feature>

  <feature id ="listener" src="features/listener/project">
    <name>Listener</name>
    <description>A listener object</description>

    <extension src="features/listener/extensions.xml"/>

    <dependencies>
        <dependency groupId="org.nuxeo.ecm.core" artifactId="nuxeo-core-event"/>
    </dependencies>
    
    <transform path="src/main/java/packagePath/MyListener.java" to="src/main/java/${packagePath}/${className}.java" />
    
    <select path = "src/main/java/${packagePath}/${className}.java" />
  </feature>

  <feature id ="gadget" src="features/gadget/project">
    <name>Gadget</name>
    <description>A gadget object</description>

    <manifest key="Nuxeo-Component" value="gadget/${gadgetName}/gadgets-contrib.xml" append="true"/>

	<rename path="src/main/resources/gadget/gadgetName" to="src/main/resources/gadget/${gadgetName}"/>
	<transform path="src/main/resources/gadget/${gadgetName}/gadgetName.xml" to="src/main/resources/gadget/${gadgetName}/${gadgetName}.xml"/>
	<transform path="src/main/resources/gadget/${gadgetName}/gadgetName.css" to="src/main/resources/gadget/${gadgetName}/${gadgetName}.css"/>
	<transform path="src/main/resources/gadget/${gadgetName}/gadgetName.js" to="src/main/resources/gadget/${gadgetName}/${gadgetName}.js"/>
	<rename path="src/main/resources/gadget/${gadgetName}/gadgetName.png" to="src/main/resources/gadget/${gadgetName}/${gadgetName}.png"/>
	<transform path="src/main/resources/gadget/${gadgetName}/gadgets-contrib.xml" to="src/main/resources/gadget/${gadgetName}/gadgets-contrib.xml"/>
	<transform path="src/main/resources/gadget/${gadgetName}/dynamic_messages.properties" to="src/main/resources/gadget/${gadgetName}/dynamic_messages.properties"/>

    <select path = "src/main/resources/gadget/${gadgetName}" />
  </feature>

  <feature id ="automation-gadget" src="features/automation-gadget/project">
    <name>Automation Gadget</name>
    <description>A gadget that invoke a Nuxeo operation</description>

    <manifest key="Nuxeo-Component" value="gadget/${gadgetName}/gadgets-contrib.xml" append="true"/>

	<rename path="src/main/resources/gadget/gadgetName" to="src/main/resources/gadget/${gadgetName}"/>
	<transform path="src/main/resources/gadget/${gadgetName}/gadgetName.xml" to="src/main/resources/gadget/${gadgetName}/${gadgetName}.xml"/>
	<transform path="src/main/resources/gadget/${gadgetName}/gadgetName.css" to="src/main/resources/gadget/${gadgetName}/${gadgetName}.css"/>
	<transform path="src/main/resources/gadget/${gadgetName}/gadgetName.js" to="src/main/resources/gadget/${gadgetName}/${gadgetName}.js"/>
	<rename path="src/main/resources/gadget/${gadgetName}/gadgetName.png" to="src/main/resources/gadget/${gadgetName}/${gadgetName}.png"/>
	<transform path="src/main/resources/gadget/${gadgetName}/gadgets-contrib.xml" to="src/main/resources/gadget/${gadgetName}/gadgets-contrib.xml"/>
	<transform path="src/main/resources/gadget/${gadgetName}/dynamic_messages.properties" to="src/main/resources/gadget/${gadgetName}/dynamic_messages.properties"/>

    <select path = "src/main/resources/gadget/${gadgetName}" />
  </feature>

  <feature id ="securityPolicy" src="features/securityPolicy/project">
    <name>Security Policy</name>
    <description>A Security Policy</description>
 
    <extension src="features/securityPolicy/extensions.xml"/>
    
    <dependencies>
        <dependency groupId="org.nuxeo.ecm.core" artifactId="nuxeo-core"/>
    </dependencies>
 
    <transform path="src/main/java/packagePath/MySecurityPolicy.java" to="src/main/java/${packagePath}/${className}.java" />
<!-- TODO test not implemented by now     <transform path="src/main/java/packagePath/TestMySecurityPolicy.java" to="src/test/java/${packagePath}/test/Test${className}.java" /> -->

    <select path = "src/main/java/${packagePath}/${className}.java" />
  </feature>

  <feature id="permission" src="features/permission/project">
    <name>Permission</name>
    <description>A Permission</description>
    
    <transform path="src/main/resources/OSGI-INF/permissions.xml" to="src/main/resources/OSGI-INF/permission-${name}.xml" />
    <manifest key="Nuxeo-Component" value="OSGI-INF/permission-${name}.xml" append="true" />
    
    <select path = "src/main/resources/OSGI-INF/permission-${name}.xml" />
  </feature>

  <feature id ="permissionVisibility" src="features/permissionVisibility/project">
    <name>Permission Visibility</name>
    <description>A Permission Visibility</description>

    <transform path="src/main/resources/OSGI-INF/permissions-visibility.xml" />
    <manifest key="Nuxeo-Component" value="OSGI-INF/permissions-visibility.xml" append="true" />

    <dependencies>
        <dependency groupId="org.nuxeo.ecm.core" artifactId="nuxeo-core"/>
    </dependencies>

    <select path = "src/main/resources/OSGI-INF/permissions-visibility.xml" />    
  </feature>

</templates>
